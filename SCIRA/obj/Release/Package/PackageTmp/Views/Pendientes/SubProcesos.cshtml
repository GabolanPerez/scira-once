@model IEnumerable<SCIRA.Models.c_sub_proceso>
@using SCIRA.Utilidades

@{
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
    ViewBag.Title = "Sub Procesos Pendientes de Certificar";
}

<script>
    $(function () {
        chat.client.removeRow = function (typeTable, id, id_usuario) {


            if (UserID == id_usuario && typeTable == 12) {
                table
                    .rows('.R'+id)
                    .remove()
                    .draw();
            }
        };
    });
</script>


<h2><span class="catalogName">@Strings.getMSG("PendientesVerTodoIndex007") @ViewBag.periodo</span></h2>


<table id="results" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th class="search">@Strings.getMSG("Entidad")</th>
            <th class="search">@Strings.getMSG("MP")</th>
            <th class="search">@Strings.getMSG("P")</th>
            <th class="search">@Strings.getMSG("SP")</th>
            <th class="search">@Strings.getMSG("Responsable")</th>
            <th class="search">@Strings.getMSG("Puestos")</th>
            <th width="55"></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr class="R@(item.id_sub_proceso)">
            <td>
                @(item.c_proceso.c_macro_proceso.c_entidad.cl_entidad + " - " + item.c_proceso.c_macro_proceso.c_entidad.nb_entidad)
            </td>
            <td>
                @(item.c_proceso.c_macro_proceso.cl_macro_proceso + " - " + item.c_proceso.c_macro_proceso.nb_macro_proceso)
            </td>
            <td>
                @(item.c_proceso.cl_proceso + " - " + item.c_proceso.nb_proceso)
            </td>
            <td>
                @( item.cl_sub_proceso + " - " + item.nb_sub_proceso)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.c_usuario.nb_usuario)
            </td>
            <td>
                @SCIRA.Utilidades.Utilidades.PuestoUsuario(item.id_responsable)
            </td>
            <td>
                <center>
                    <a href="@Url.Action("Certificados","CertificacionSubProceso", new { id = item.id_sub_proceso })"  target="_blank">
                        <i class="fa fa-bookmark fa-lg relative" title="@Strings.getMSG("lyPCertificacionesIndex001")"><span class="NotifCounterRight">@(item.k_certificacion_estructura.Count())</span></i>
                    </a>
                </center>
            </td>
        </tr>
        }
    </tbody>
</table>
