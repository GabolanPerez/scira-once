@model IEnumerable<SCIRA.ViewModels.emailViewModel>
@using SCIRA.Utilidades
<link href="~/Content/Extras.css" rel="stylesheet" />
@{
    /**/

    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
    ViewBag.Title = "Mensajes Masivos";
}

<link href="~/Content/bootstrap-toggle.min.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap-toggle.min.js"></script>


<script>
    $(document).ready(function () {
        $("#s0").html($("#e0s").text());
        $("#h0").html($("#e0h").text());
        $("#b0").html($("#e0b").text());
        $("#s1").html($("#e1s").text());
        $("#h1").html($("#e1h").text());
        $("#b1").html($("#e1b").text());
    })

    function toggleMSGSend(id, value) {
        $.ajax({
                dataType: "html",
                type: "post",
                url: '@(Url.Action("ToggleActive", "MassiveNotification"))',
                data: {id,value},
                success: function (data) {
                    //alert("Funcionó");
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    //alert("Falló");
                }
            });
    }


    $(function () {
        $('.scb0').change(function () {
            toggleMSGSend($(this).data("value"), $(this).prop('checked'));
        })
    })
</script>

<h2>@Strings.getMSG("Menu073")</h2>


<div id="e0h" style="display:none">@Model.ElementAt(0).head</div>
<div id="e0s" style="display:none">@Model.ElementAt(0).subject</div>
<div id="e0b" style="display:none">@Model.ElementAt(0).body</div>
<div id="e1h" style="display:none">@Model.ElementAt(1).head</div>
<div id="e1s" style="display:none">@Model.ElementAt(1).subject</div>
<div id="e1b" style="display:none">@Model.ElementAt(1).body</div>

<div class="form-horizontal">
    <br /><br />
    @Html.ActionLink(Strings.getMSG("Escribir Mensaje"), "WriteMessage", null, new { @class = "btn btn-default" })
    <br /><br /><br /><br />


    <div class="row">
        <div class="card" style="width: 54rem;">
            <div class="card-body">
                <h4 class="card-title" id="h0"></h4>
                <h6 class="card-subtitle mb-2 text-muted" id="s0"></h6>
                <br />
                <p class="card-text" id="b0"></p>
                <a href="@Url.Action("Edit", new { id = 1 })">
                    <i class="glyphicon glyphicon-pencil" title="@Strings.getMSG("Editar")"></i>
                </a>
                <input class="scb0" type="checkbox" @(Model.ElementAt(0).send ? "checked" : "") data-value="1" data-on="@Strings.getMSG("MassiveNotificationWriteMessage021")" data-off="@Strings.getMSG("Desactivado")" data-toggle="toggle" data-size="mini" data-width="100">
                <p class="text-muted pull-right">@Strings.getMSG("MassiveNotificationWriteMessage002")</p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="card pull-right" style="width: 54rem;">
            <div class="card-body">
                <h4 class="card-title" id="h1"></h4>
                <h6 class="card-subtitle mb-2 text-muted" id="s1"></h6>
                <br />
                <p class="card-text" id="b1"></p>
                <a href="@Url.Action("Edit", new { id = 2 })">
                    <i class="glyphicon glyphicon-pencil" title="@Strings.getMSG("Editar")"></i>
                </a>
                <input class="scb0" type="checkbox" @(Model.ElementAt(1).send ? "checked" : "") data-value="2" data-on="@Strings.getMSG("MassiveNotificationWriteMessage021")" data-off="@Strings.getMSG("Desactivado")" data-toggle="toggle" data-size="mini" data-width="100">
                <p class="text-muted pull-right">@Strings.getMSG("MassiveNotificationWriteMessage001")</p>
            </div>
        </div>
    </div>
</div>