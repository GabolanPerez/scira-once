@model IEnumerable<SCIRA.ViewModels.ContenidoNormatividadViewModel>

@{
    ViewBag.Title = "Contenido";
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
}

<link href="~/Content/base.css" rel="stylesheet" />
<link href="~/Content/bootstrap-datetimepicker.css" rel="stylesheet" />

<script type="text/javascript" src="~/Scripts/moment-with-locales.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap-datetimepicker.js"></script>

<link href="~/Content/bootstrap-select.min.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap-select.js"></script>

<h2>Contenido de Normatividad</h2>

@if (Model.Count() > 0)
{
    if (Model.First().id_contenido_normatividad_padre != null)
    {

        <p>
            @Html.ActionLink("Atras", "Index", "ContenidoNormatividad", new { id = ViewBag.idAnterior }, new { @class = "btn btn-default btn-sm" })

            @Html.ActionLink("Agregar", "Create", "ContenidoNormatividad", new { id = Model.First().id_contenido_normatividad_padre }, new { @class = "btn btn-default btn-sm" })
        </p>
    }

    if (ViewBag.Contador != null)
    {
        for (int i = ViewBag.Contador; i > 0; i--)
        {
            <span> <a href="@Url.Action("Index", new { id = ViewBag.IDs[i-1] })">@ViewBag.Claves[i - 1]</a> >> </span>
        }
    }

    <script>
        function getFicha(id) {
            menuModal.initModal({
                title: 'Ficha',
                size: 'lg',
                show: true,
                loadUrl: '@Url.Action("ContenidoNormatividadI","Ficha")/'+id
            });
        }
    </script>






    <table id="results" class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th class="search">Clave</th>
                <th class="search">Nombre</th>
                <th class="search">Nivel</th>
                <th class="search">Orden del nivel</th>
                <th width="100"></th>
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <a href="@Url.Action("Index", new { id = item.id_contenido_normatividad})">
                            @item.cl_contenido_normatividad
                        </a>
                    </td>
                    <td>
                        <a href="@Url.Action("Index", new { id = item.id_contenido_normatividad})">
                            @item.ds_contenido_normatividad
                        </a>
                    </td>
                    <td>
                        @item.nb_nivel_normatividad
                    </td>
                    <td>
                        @ViewBag.orden_nivel
                    </td>
                    <td>
                        <center>
                            <a href="@Url.Action("Edit", new { id = item.id_contenido_normatividad })">
                                <i class="fa fa-pencil" title="Editar"></i>
                            </a>
                            @if (item.id_contenido_normatividad_padre != null)
                            {
                                <span>|</span>
                                <a href="@Url.Action("Delete", new { id = item.id_contenido_normatividad })">
                                    <i class="fa fa-trash" title="Borrar"></i>
                                </a>
                            }
                            |
                            <a>
                                <i class="fa fa-id-card" title="Ficha" onclick="getFicha(@item.id_contenido_normatividad)"></i>
                            </a>
                            @if (item.sig_nivel != "null")
                            {
                                <span>|</span>
                                <a href="@Url.Action("Create", new { id = item.id_contenido_normatividad })">
                                    <i class="fa fa-plus" title="Agregar @item.sig_nivel"></i>
                                </a>
                            }
                            else
                            {
                                <span>|</span>
                                <a href=#>
                                    <i class="fa fa-info-circle" title="Agregue un Nivel más a la Normatividad"></i>
                                </a>
                            }
                        </center>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <center>
        <h3>El nodo no cuenta con más elementos</h3>
        <p>
            @Html.ActionLink("Atras", "Index", "ContenidoNormatividad", new { id = ViewBag.idAnterior }, new { @class = "btn btn-default btn-sm" })
        </p>
    </center>
}



