@model IEnumerable<SCIRA.Models.c_area_costeo_n3>
@using SCIRA.Utilidades
@using SCIRA.Models
@using System.Reflection;
@{
    c_area_costeo_n2 ac = ViewBag.ac;
}

<script>
    var createURL = '@(Url.Action("CreateLVL3","ActividadCosteo") + "/" + ac.id_area_costeo_n2)';
    var editURL = '@(Url.Action("EditLVL3","ActividadCosteo"))';
    var deleteURL = '@(Url.Action("DeleteLVL3","ActividadCosteo"))';
    var returnURL = '@(Url.Action("LVL2","ActividadCosteo") + "/" + ac.id_area_costeo)';


    function deleteRequest(id,name) {
        var options = {
            title: "@Strings.getMSG("ActividadCosteoIndex008")" + name +"?",
            action: "deleteConfirmed(" + id + ")"
        }
        confirmationModal.initModal(options);
    }

    function deleteConfirmed(id) {
        executePost(
                deleteURL + "/" +id,
                null,
                "deleteSuccess(" + id + ")",
                "deleteError()"
            );
    }

    $(document).ready(function () {
        menuModal.setTitle('@(ac.c_area_costeo.nb_area_costeo)/@(ac.nb_area_costeo_n2)');
        initTables("#menuModal");
    });

    function deleteSuccess(id) {
        $(".RL3" + id).remove();
    }

    function deleteError() {
        toastr.error("@Strings.getMSG("ActividadCosteoIndex009")");
    }
</script>



<input type="button" class="btn btn-default" value="@Strings.getMSG("Regresar")" onclick="menuModal.bodyLoad(returnURL)" />
<input type="button" class="btn btn-default" value="@Strings.getMSG("Agregar")" onclick="menuModal.bodyLoad(createURL)" />

<br /><br />

<table class="results table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>
                @Strings.getMSG("Clave")
            </th>
            <th>
                @Strings.getMSG("Nombre")
            </th>
            <th width="90px"></th>
        </tr>
    </thead>

    <tbody>
        @foreach (var item in Model)
        {
            <tr class="RL3@(item.id_area_costeo_n3)">
                <td>
                    @item.cl_area_costeo_n3
                </td>
                <td>
                    @item.nb_area_costeo_n3
                </td>
                <td>
                    <center>
                        <a onclick="menuModal.bodyLoad(editURL + '/@item.id_area_costeo_n3')">
                            <i class="fa fa-pencil" title= "@Strings.getMSG("Editar")"></i>
                        </a>
                        |
                        <a onclick="deleteRequest(@item.id_area_costeo_n3,'@item.cl_area_costeo_n3 - @item.nb_area_costeo_n3')">
                            <i class="fa fa-trash" title= "@Strings.getMSG("Borrar")"></i>
                        </a>
                    </center>
                </td>
            </tr>
        }
    </tbody>
</table>