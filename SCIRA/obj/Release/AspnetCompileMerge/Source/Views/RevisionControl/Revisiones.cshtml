@model IEnumerable<SCIRA.Models.k_revision_control>
@using SCIRA.Models
@using SCIRA.Utilidades
@{
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
    ViewBag.Title = "Revisiones";

}
<link href="~/Content/font-awesome.min.css" rel="stylesheet" />
<h2>@Strings.getMSG("RevisionControlRevisiones004") @ViewBag.control.relacion_control</h2>

<p>
    @Html.ActionLink(Strings.getMSG("Agregar"), "Create", new { @id = ViewBag.control.id_control }, new { @class = "btn btn-default btn-sm" })
    @Html.ActionLink(Strings.getMSG("Regresar"), "Index", null, new { @class = "btn btn-default btn-sm" })
</p>

<table id="results" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th class="search">@Strings.getMSG("RevisionControlRevisiones001")</th>
            <th class="search">@Strings.getMSG("RevisionControlRevisiones002")</th>
            <th>@Strings.getMSG("RevisionControlRevisiones003")</th>
            <th width="80"></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @item.dg_nb_responsable_revision
                </td>
                <td>
                    @item.dg_fe_revision.Value.ToString("dd/MM/yyyy")
                </td>
                <td>
                    @foreach (var file in item.c_archivo)
                    {
                        <a href="@Url.Action("Download","Archivos", new { id = file.id_archivo})"><i class="fa fa-file@(Utilidades.getFileClass(file))" title="@file.nb_archivo"></i></a>
                    }
                    @if (item.c_archivo.Count() == 0)
                    {
                        @:@Strings.getMSG("GraphicsRevisionControlIndex010")
                    }
                </td>
                <td>
                    <center>
                        <a href="#" onclick="GetPDF(@item.id_revision_control)">
                            <i class="fa fa-file-pdf-o" title="@Strings.getMSG("Ver PDF")"></i>
                        </a>|
                        <a href="@Url.Action("Edit", new { id = item.id_revision_control})">
                            <i class="glyphicon glyphicon-pencil" title="@Strings.getMSG("Editar")"></i>
                        </a>|
                        <a href="@Url.Action("Delete", new { id = item.id_revision_control})">
                            <i class="glyphicon glyphicon-trash" title="@Strings.getMSG("Borrar")"></i>
                        </a>
                    </center>
                </td>
            </tr>
        }
    </tbody>
</table>


<!-- #region Scripts -->
<script>
    function GetPDF(id) {
        $("#menuModal .bodyContent").html('<span id="n"><embed src="@Url.Action("GetPDF","RevisionControl",null)/' + id + '" width="100%" height="700"></span>');
        $("#menuModal .HeadLabel").html("@Strings.getMSG("RevisionControlRevisiones005")");

        $("#menuModal").modal('show');
    }
</script>
<!-- #endregion -->