@model IEnumerable<SCIRA.Models.k_objeto>
@using SCIRA.Utilidades
<script src="~/Scripts/sharedScripts.js"></script>
<script>
    $(document).ready(function () {
        initTables("#contenedor1");
        $("#ind1").removeClass("IndicatorLoader");
    });
</script>

<h4>@Strings.getMSG("Menu127")</h4>

<p>
    <input type="button" onclick="createOficio()" class="btn btn-default btn-sm" value="@Strings.getMSG("Agregar")" />
</p>

<table class="results table table-bordered table-striped table-hover table-responsive">
    <thead>
        <tr>
            <th>@Strings.getMSG("lyPIndex029")</th>
            <th>@Strings.getMSG("Entidad")</th>
            <th>@Strings.getMSG("lyPIndex005")</th>
            <th>@Strings.getMSG("lyPIndex006")</th>
            <th>@Strings.getMSG("lyPIndex007")</th>
            <th width="200px"></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.nb_objeto</td>
                <td>@item.c_entidad.cl_entidad - @item.c_entidad.nb_entidad</td>
                <td>@(item.fe_alta.HasValue ? item.fe_alta.Value.ToString("dd/MM/yyyy") : "")</td>
                <td>@(item.fe_vencimiento.HasValue ? item.fe_vencimiento.Value.ToString("dd/MM/yyyy") : "")</td>
                <td>@(item.fe_contestacion.HasValue ? item.fe_contestacion.Value.ToString("dd/MM/yyyy") : "")</td>
                <td>
                    <center>
                        <center>
                            @if (item.nb_archivo_1 != null)
                            {
                                <a href="@Url.Action("DescargaArchivo", new { id = item.id_objeto,index = 1 })">
                                    <i class="fa fa-download fa-lg" title="@Strings.getMSG("Descargar copia del oficio")"></i>
                                </a>
                                <span>|</span>
                            }
                            @if (item.nb_archivo_2 != null)
                            {
                                <a href="@Url.Action("DescargaArchivo", new { id = item.id_objeto,index = 2 })">
                                    <i class="fa fa-file-o fa-lg" title="@Strings.getMSG("ContestacionOficioIndex010")"></i>
                                </a>
                                <span>|</span>
                            }
                            @if (item.k_objeto2.Count() > 0 || item.k_objeto1.Count() > 0)
                            {
                                <a href="#" onclick="oficiosRelacionados(@item.id_objeto,'@item.nb_objeto')">
                                    <i class="fa fa-link" title="@Strings.getMSG("Oficios Relacionados")" style="font-size: 16px;"></i>
                                </a>
                                <span>|</span>
                            }
                            <a>
                                <i class="fa fa-id-card" title="@Strings.getMSG("Ficha")" onclick="getFichaO(@item.id_objeto)"></i>
                            </a> |
                            <a href="#" onclick="editOficio(@item.id_objeto)">
                                <i class="fa fa-edit" title="@Strings.getMSG("Editar")" style="font-size: 16px;"></i>
                            </a> |
                            <a href="#" onclick="indexIncidencias(1,@item.id_objeto)">
                                <i class="fa fa-exclamation-triangle" title="@Strings.getMSG("Incidencias") (@item.k_incidencia.Count())" style="font-size: 16px;"></i>
                            </a> |
                            <a href="#" onclick="deleteOficio(@item.id_objeto)">
                                <i class="fa fa-trash" title="@Strings.getMSG("Borrar")" style="font-size: 16px;"></i>
                            </a>
                        </center>
                    </center>
                </td>
            </tr>
        }

    </tbody>
</table>