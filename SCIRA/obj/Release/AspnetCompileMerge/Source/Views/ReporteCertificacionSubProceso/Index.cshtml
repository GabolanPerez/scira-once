@model IEnumerable<SCIRA.Models.k_certificacion_estructura>
@using SCIRA.Utilidades
@{
    ViewBag.Title = "Reporte Certificación Sub Procesos";
    Layout = "~/Views/Shared/_LayoutReporte.cshtml";
    SCIRA.Models.SICIEntities db = new SCIRA.Models.SICIEntities();
}

<h2>@Strings.getMSG("ReporteCertificacionIndex013")</h2>

<table class="results table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th class="search">@Strings.getMSG("Entidad")</th>
            <th class="search">@Strings.getMSG("ReporteEstructuraIndex001")</th>
            <th class="search">@Strings.getMSG("EntidadIndex001")</th>
            <th class="search">@Strings.getMSG("MP")</th>
            <th class="search">@Strings.getMSG("ReporteEstructuraIndex002")</th>
            <th class="search">@Strings.getMSG("EntidadIndex001")</th>
            <th class="search">@Strings.getMSG("P")</th>
            <th class="search">@Strings.getMSG("ReporteEstructuraIndex003")</th>
            <th class="search">@Strings.getMSG("EntidadIndex001")</th>
            <th class="search">@Strings.getMSG("SP")</th>
            <th class="search">@Strings.getMSG("RiesgoCreate037")</th>
            <th class="search">@Strings.getMSG("EntidadIndex001")</th>
            <th class="search">@Strings.getMSG("PeriodoCertificacionIndex002")</th>
            <th class="search">@Strings.getMSG("CertificacionesEntidad005")</th>
            <th class="search">@Strings.getMSG("lyPSeguimientoCreate002")</th>
            <th class="search">@Strings.getMSG("CertificacionesEntidad008")</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            var sp = item.c_sub_proceso;
            var pr = sp.c_proceso;
            var mp = pr.c_macro_proceso;
            var en = mp.c_entidad;
            var periodo = item.c_periodo_certificacion;


        <tr>
            <td>@(en.cl_entidad + " - " + en.nb_entidad)</td>
            <td>@(en.c_usuario.nb_usuario)</td>
            <td>@(SCIRA.Utilidades.Utilidades.PuestoUsuario(en.id_responsable))</td>
            <td>@(mp.cl_macro_proceso + " - " + mp.nb_macro_proceso)</td>
            <td>@(mp.c_usuario.nb_usuario)</td>
            <td>@(SCIRA.Utilidades.Utilidades.PuestoUsuario(mp.id_responsable))</td>
            <td>@(pr.cl_proceso + " - " + pr.nb_proceso)</td>
            <td>@(pr.c_usuario.nb_usuario)</td>
            <td>@(SCIRA.Utilidades.Utilidades.PuestoUsuario(pr.id_responsable))</td>
            <td>@(sp.cl_sub_proceso + " - " + sp.nb_sub_proceso)</td>
            <td>@(sp.c_usuario.nb_usuario)</td>
            <td>@(SCIRA.Utilidades.Utilidades.PuestoUsuario(sp.id_responsable))</td>
            <td>@(periodo.nb_periodo_certificacion + " - " + periodo.anio)</td>
            <td>@(item.leyenda_certificacion_estructura)</td>
            <td>@(item.comentarios)</td>
            <td>@(item.resultado ? Strings.getMSG("UsuarioIndex004"):Strings.getMSG("UsuarioIndex005"))</td>
        </tr>
        }
    </tbody>
</table>
