@model IEnumerable<SCIRA.Models.k_evaluacion>
@using SCIRA.Utilidades
@{
    ViewBag.Title = "Reporte Indicadores";
    Layout = "~/Views/Shared/_LayoutReporte.cshtml";
}

<h2>@Strings.getMSG("ReporteIndicadorIndex001")</h2>

<table class="results table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th class="search">@Strings.getMSG("Entidad")</th>
            <th class="search">@Strings.getMSG("ReporteEstructuraIndex001")</th>
            <th class="search">@Strings.getMSG("Clave")</th>
            <th class="search">@Strings.getMSG("Nombre")</th>
            <th class="search">@Strings.getMSG("SubProcesoCreate018")</th>
            <th class="search">@Strings.getMSG("IndicadorCreate003")</th>
            <th class="search">@Strings.getMSG("IndicadorCreate004")</th>
            <th class="search">@Strings.getMSG("Menu053")</th>
            <th class="search">@Strings.getMSG("IndicadorIndex002")</th>
            <th class="search">@Strings.getMSG("IndicadorDelete003")</th>
            <th class="search">@Strings.getMSG("IndicadorCreate010")</th>
            <th class="search">@Strings.getMSG("ReporteIndicadorIndex003")</th>
            <th class="search">@Strings.getMSG("ReporteIndicadorIndex004")</th>
            <th class="search">@Strings.getMSG("ReporteIndicadorIndex005")</th>
            <th class="search">@Strings.getMSG("ReporteIndicadorIndex006")</th>
            <th class="search">@Strings.getMSG("IndicadorIndex001")</th>
            <th class="search">@Strings.getMSG("Area")</th>
            <th class="search">@Strings.getMSG("Responsable")</th>
            <th class="search">@Strings.getMSG("ReporteIndicadorIndex002")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorCreate007")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorCreate008")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorEvaluaciones001")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorEvaluaciones003")</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            var indicador = item.c_indicador;

            var en = indicador.c_entidad;
            var ar = indicador.c_area;
            var resp = indicador.c_usuario;
            var frec = indicador.c_frecuencia_indicador;
            var unidad = indicador.c_unidad_indicador;
            var control_a = indicador.k_control != null ? indicador.k_control.relacion_control : "N/A";
            var periodo = item.c_periodo_indicador;
            var calificacion = item.c_calificacion_indicador!= null ? item.c_calificacion_indicador.nb_calificacion_indicador : "N/A";

            <tr>
                <td>@(en.cl_entidad + " - " + en.nb_entidad)</td>
                <td>@(en.c_usuario.nb_usuario)</td>
                <td>@(indicador.cl_indicador)</td>
                <td>@(indicador.nb_indicador)</td>
                <td>@(indicador.ds_indicador)</td>
                <td>@(indicador.ds_numerador)</td>
                <td>@(indicador.ds_denominador)</td>
                <td>@(frec.nb_frecuencia_indicador)</td>
                <td>@(unidad.nb_unidad_indicador)</td>
                <td>@(control_a)</td>
                <td>@(((float)indicador.peso).ToString().Replace(",", "."))</td>
                <td>@(((float)indicador.umbral000i).ToString().Replace(",", ".")) - @(((float)indicador.umbral000f).ToString().Replace(",", "."))</td>
                <td>@(((float)indicador.umbral050i).ToString().Replace(",", ".")) - @(((float)indicador.umbral050f).ToString().Replace(",", "."))</td>
                <td>@(((float)indicador.umbral075i).ToString().Replace(",", ".")) - @(((float)indicador.umbral075f).ToString().Replace(",", "."))</td>
                <td>@(((float)indicador.umbral100i).ToString().Replace(",", ".")) - @(((float)indicador.umbral100f).ToString().Replace(",", "."))</td>
                <td>@(indicador.esta_activo ? Strings.getMSG("UsuarioIndex004"):Strings.getMSG("UsuarioIndex005"))</td>
                <td>@(ar.nb_area)</td>
                <td>@(resp.nb_usuario)</td>
                <td>@(periodo.nb_periodo_indicador)</td>
                <td>@((item.numerador).ToString().Replace(",", "."))</td>
                <td>@((item.denominador).ToString().Replace(",", "."))</td>
                <td>@((item.medicion).ToString().Replace(",", "."))</td>
                <td>@(calificacion)</td>
            </tr>
        }
    </tbody>
</table>
