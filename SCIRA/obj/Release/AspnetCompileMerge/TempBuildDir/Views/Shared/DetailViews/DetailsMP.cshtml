@model IEnumerable<SCIRA.Models.c_macro_proceso>
@using SCIRA.Utilidades

@{
    var type = ViewBag.type;

    var cert = type == "certificados";

    int idPeriodo = 0;

    if (cert)
    {
        idPeriodo = ViewBag.idPeriodoC;
    }
}

<script src="~/Scripts/sharedScripts.js"></script>
<script>
    $(document).ready(function () {
        initTables("#menuModal");

        @if(ViewBag.title != null)
        {
        @:menuModal.setTitle("@ViewBag.title");
        }
    });
</script>

<table class="results table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>@Strings.getMSG("Entidad")</th>
            <th>@Strings.getMSG("MP")</th>
            <th>@Strings.getMSG("Responsable")</th>
            <th>@Strings.getMSG("Puesto")</th>
            @if (cert)
            {
                <th>@Strings.getMSG("CertificacionesEntidad008")</th>
                <th>@Strings.getMSG("CertificacionesEntidad009")</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td>
                @(item.c_entidad.cl_entidad + " - " + item.c_entidad.nb_entidad)
            </td>
            <td>
                @(item.cl_macro_proceso + " - " + item.nb_macro_proceso)
            </td>
            <td>
                @(item.c_usuario.nb_usuario)
            </td>
            <td>
                @Utilidades.PuestoUsuario(item.id_responsable)
            </td>
            @if (cert)
            {
                var certificacion = item.k_certificacion_estructura.First(c => c.id_periodo_certificacion == idPeriodo);

                <td>@(certificacion.resultado ? Strings.getMSG("UsuarioIndex004"):Strings.getMSG("UsuarioIndex005"))</td>
                <td>@(certificacion.comentarios)</td>
            }
        </tr>
        }
    </tbody>
</table>