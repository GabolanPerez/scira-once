@model IEnumerable<SCIRA.Models.c_cuenta_contable>
@using SCIRA.Utilidades
@using SCIRA.Models
@using System.Reflection;
@{
    c_grupo_cuenta_contable gr = ViewBag.gr;
}

<script>
    var createURL = '@(Url.Action("CreateAccount","CuentaContable") + "/" + gr.id_grupo_cuenta_contable)';
    var editURL = '@(Url.Action("EditAccount","CuentaContable"))';
    var deleteURL = '@(Url.Action("DeleteAccount","CuentaContable"))';

    function deleteRequest(id,name) {
        var options = {
            title: "@Strings.getMSG("ActividadCosteoIndex008")" + name +" @Strings.getMSG("ActividadCosteoIndex011")",
            action: "deleteConfirmed(" + id + ")"
        }
        confirmationModal.initModal(options);
    }

    function deleteConfirmed(id) {
        executePost(
                deleteURL + "/" +id,
                null,
                "deleteSuccess(" + id + ")",
                "deleteError()"
            );
    }

    $(document).ready(function () {
        menuModal.setTitle('@Strings.getMSG("CuentaContableCreate011") @gr.nb_grupo_cuenta_contable');
        initTables("#menuModal");
    });

    function deleteSuccess(id) {
        $(".RL2" + id).remove();
    }

    function deleteError() {
        toastr.error("@Strings.getMSG("ActividadCosteoIndex009")");
    }
</script>



<input type="button" class="btn btn-default" value="@Strings.getMSG("Agregar")" onclick="menuModal.bodyLoad(createURL)" />
<br /><br />

<table class="results table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>
                @Strings.getMSG("Clave")
            </th>
            <th>
                @Strings.getMSG("Nombre")
            </th>
            <th width="90px"></th>
        </tr>
    </thead>

    <tbody>
        @foreach (var item in Model)
        {
            <tr class="RL2@(item.id_cuenta_contable)">
                <td>
                    @item.cl_cuenta_contable
                </td>
                <td>
                    @item.nb_cuenta_contable
                </td>
                <td>
                    <center>
                        <a onclick="menuModal.bodyLoad(editURL + '/@item.id_cuenta_contable')">
                            <i class="fa fa-pencil" title="@Strings.getMSG("Editar")"></i>
                        </a>
                        |
                        <a onclick="deleteRequest(@item.id_cuenta_contable, '@item.cl_cuenta_contable - @item.nb_cuenta_contable')">
                            <i class="fa fa-trash" title="@Strings.getMSG("Borrar")"></i>
                        </a>
                    </center>
                </td>
            </tr>
        }
    </tbody>
</table>