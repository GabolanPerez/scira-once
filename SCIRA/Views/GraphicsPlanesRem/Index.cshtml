@model IEnumerable<SCIRA.Models.k_plan>

@using SCIRA.Models
@using SCIRA.Utilidades
@{
    ViewBag.Title = Strings.getMSG("GraphicsPlanesRemIndex022");
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
    var db = new SICIEntities();

    var planes = Model.ToList();//Todos los planes
    var pC = planes.Where(p => p.r_conclusion_plan.Count > 0).ToList();//Planes concluidos
    var pNC = planes.Where(p => p.r_conclusion_plan.Count == 0).ToList();//planes no concluidos

    var pVig = pNC.Where(p => p.fe_estimada_implantacion > DateTime.Now).ToList();//planes vigentes
    var pVen = pNC.Where(p => p.fe_estimada_implantacion <= DateTime.Now).ToList();//planes vencidos

    var clasifInc = db.c_clasificacion_incidencia.OrderBy(c=>c.cl_clasificacion_incidencia).ToList();
    int nClasif = clasifInc.Count;

    var p1C = pC.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 1).ToList();//Oficios-Concluidos
    var p1Vi = pVig.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 1).ToList();//Oficios-Vigentes
    var p1Ve = pVen.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 1).ToList();//Oficios-Vencidos

    var p2C = pC.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 2).ToList();//InformesAudExt-Concluidos
    var p2Vi = pVig.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 2).ToList();//InformesAudExt-Vigentes
    var p2Ve = pVen.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 2).ToList();//InformesAudExt-Vencidos

    var p3C = pC.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 3).ToList();//InformesAudInt-Concluidos
    var p3Vi = pVig.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 3).ToList();//InformesAudInt-Vigentes
    var p3Ve = pVen.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 3).ToList();//InformesAudInt-Vencidos

    var p4C = pC.Where(p => p.k_incidencia.k_certificacion_control != null).ToList();//Certificacion-Concluidos
    var p4Vi = pVig.Where(p => p.k_incidencia.k_certificacion_control != null).ToList();//Certificacion-Vigentes
    var p4Ve = pVen.Where(p => p.k_incidencia.k_certificacion_control != null).ToList();//Certificacion-Vencidos

    var p5C = pC.Where(p => p.k_incidencia.k_control != null).ToList();//MRyC-Concluidos
    var p5Vi = pVig.Where(p => p.k_incidencia.k_control != null).ToList();//MRyC-Vigentes
    var p5Ve = pVen.Where(p => p.k_incidencia.k_control != null).ToList();//MRyC-Vencidos

    var p6C = pC.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 6).ToList();//Otros-Concluidos
    var p6Vi = pVig.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 6).ToList();//Otros-Vigentes
    var p6Ve = pVen.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 6).ToList();//Otros-Vencidos

    string cls = "";
    foreach (var clas in clasifInc) { cls += "c" + clas.id_clasificacion_incidencia + ":'" + clas.nb_clasificacion_incidencia + "',"; }
}
<script src="~/Scripts/sharedScripts.js"></script>
<link href="~/Content/Extras.css" rel="stylesheet" />
<script>
    var CLS = { @Html.Raw(cls) };
        var ORI = {
            o1: '@Strings.getMSG("Menu127")', o2: '@Strings.getMSG("GraphicsPlanesRemIndex014")', o3: '@Strings.getMSG("GraphicsPlanesRemIndex015")', o4: '@Strings.getMSG("Menu014")', o5: '@Strings.getMSG("Menu077")', o6: '@Strings.getMSG("lyPIndex003")' }
    var EST = { e1: '@Strings.getMSG("ReporteIyPIndex018")', e2: '@Strings.getMSG("GraphicsPlanesRemIndex004")', e3: '@Strings.getMSG("GraphicsPlanesRemIndex005")', e4:'@Strings.getMSG("GraphicsPlanesRemIndex006")'};

    function details(estado, origen, clasificacion, ) {
        var LabelClas = CLS['c' + clasificacion];
        var LabelOri = ORI['o' + origen];
        var LabelEst = EST['e' + estado];

        var tile = "";
        if (estado < 4) {
            var title = '@Strings.getMSG("Menu128") ' + LabelEst + ' @Strings.getMSG("GraphicsPlanesRemIndex016") ' + LabelClas;
        } else {
            var title = LabelEst + ' @Strings.getMSG("GraphicsPlanesRemIndex017") ' + LabelClas;
        }

        var title2 = "";
        if (LabelOri != undefined) {
            title2 = ' @Strings.getMSG("GraphicsPlanesRemIndex018") ' + LabelOri;
        }
        title += title2;

        loadRegisters(title, estado, origen, clasificacion);
    }

    function detailsTotal(estado) {
        var LabelEst = EST['e' + estado];

        var title = '@Strings.getMSG("GraphicsPlanesRemIndex019") ';
        if (estado < 4) {
            title += LabelEst;
        }
        loadRegisters(title,estado,0,0);
    }

    function loadRegisters(title,EST,ORI,CLAS) {
        $("#modalH").html("<center>" + title + "</center>");
        $("#modalB").html('<div class="row"><div class="col-md-offset-5 col-xs-offset-1 col-md-1 col-xs-1"><span id="ind1" class="IndicatorLoader centered"></span></div></div>')
        $("#aviso").modal('show');

        url = '@(Url.Action("Details", "GraphicsPlanesRem"))';

        $.ajax({
            dataType: "html",
            type: "post",
            cache: false,
            url: url,
            data: { EST,ORI,CLAS },
            success: function (data) {
                $("#modalB").html(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                $("#modalB").modal('hide');
                toastr.error("@Strings.getMSG("GraphicsMRyCIndex020")");
            }
        });
    }
</script>

<style type="text/css">
    td {
        text-align: center;
        font-size: .8em;
    }

    td.hover:hover{
    opacity:.5;
    }

    @foreach (var clas in clasifInc)
    {
    @:.CL@(clas.id_clasificacion_incidencia){
    @:background-color:@clas.color; color: @Utilidades.getFontColor(clas.color);
    @:}
    }
</style>
<div id="contenedor1"></div>

<div class="modal fade" id="aviso" tabindex="-1" role="dialog" aria-labelledby="Aviso" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="font-size: 2em;" id="modalH">

            </div>
            <div id="modalB" class="modal-body">

            </div>
            <div id="modalF" class="modal-footer">

            </div>
        </div>
    </div>
</div>

<h2>@ViewBag.Title @Strings.getMSG("Menu128")</h2>

<div class="form-horizontal well">

    <table class="table table-bordered table-striped table-responsive table-hover">
        <tr>
            <td rowspan="2">
                @Strings.getMSG("lyPOtrosIndex001")
            </td>
            <td colspan="@(nClasif*2)" style="background-color:green;color:white;">@Strings.getMSG("ReporteIyPIndex018")</td>
            <td colspan="@(nClasif*2)" style="background-color:yellow;color:black;">@Strings.getMSG("GraphicsPlanesRemIndex004")</td>
            <td colspan="@(nClasif*2)" style="background-color:red;color:white;">@Strings.getMSG("GraphicsPlanesRemIndex005")</td>
            <td colspan="@(nClasif*2)">@Strings.getMSG("GraphicsPlanesRemIndex006")</td>
        </tr>
        <tr>
            @for (int i = 0; i < 3; i++)
            {
                foreach (var clas in clasifInc)
                {
                    <td class="CL@(clas.id_clasificacion_incidencia)" colspan="2">@clas.nb_clasificacion_incidencia</td>
                }
            }
            @foreach (var clas in clasifInc)
            {
                <td colspan="2">@clas.nb_clasificacion_incidencia</td>
            }
        </tr>
        <tr>
            <td></td>
            @for (int i = 0; i < 3; i++)
            {
                foreach (var clas in clasifInc)
                {
                    <td class="CL@(clas.id_clasificacion_incidencia)">N°</td>
                    <td class="CL@(clas.id_clasificacion_incidencia)">%</td>
                }
            }
            @foreach (var clas in clasifInc)
            {
                <td>N°</td>
                <td>%</td>
            }
        </tr>
        <tr>
            <!--        Oficios         -->
            <td>@Strings.getMSG("Menu127")</td>
            @foreach (var clas in clasifInc)//Oficios Concluidos
            {
                var f1c = p1C.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,1,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,1,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Oficios Vigentes
            {
                var f1c = p1Vi.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,1,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,1,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Oficios Vencidos
            {
                var f1c = p1Ve.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,1,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,1,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Oficios Total
            {
                var f1c = planes.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 1).Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,1,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,1,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>

        <tr>
            <!--        Informes Auditoria Externa         -->
            <td>@Strings.getMSG("GraphicsPlanesRemIndex020")</td>
            @foreach (var clas in clasifInc)//Concluidos
            {
                var f1c = p2C.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,2,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,2,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vigentes
            {
                var f1c = p2Vi.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,2,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,2,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vencidos
            {
                var f1c = p2Ve.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,2,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,2,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Total
            {
                var f1c = planes.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 2).Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,2,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,2,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>

        <tr>
            <!--        Informes Auditoria Interna         -->
            <td>@Strings.getMSG("GraphicsPlanesRemIndex021")</td>
            @foreach (var clas in clasifInc)//Concluidos
            {
                var f1c = p3C.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,3,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,3,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vigentes
            {
                var f1c = p3Vi.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,3,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,3,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vencidos
            {
                var f1c = p3Ve.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,3,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,3,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Total
            {
                var f1c = planes.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 3).Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,3,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,3,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>

        <tr>
            <!--        Certificación         -->
            <td>@Strings.getMSG("Menu014")</td>
            @foreach (var clas in clasifInc)//Concluidos
            {
                var f1c = p4C.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,4,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,4,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vigentes
            {
                var f1c = p4Vi.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,4,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,4,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vencidos
            {
                var f1c = p4Ve.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,4,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,4,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Total
            {
                var f1c = planes.Where(p => p.k_incidencia.k_certificacion_control != null).Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,4,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,4,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>

        <tr>
            <!--        MRyC         -->
            <td>@Strings.getMSG("Menu077")</td>
            @foreach (var clas in clasifInc)//Concluidos
            {
                var f1c = p5C.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,5,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,5,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vigentes
            {
                var f1c = p5Vi.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,5,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,5,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vencidos
            {
                var f1c = p5Ve.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,5,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,5,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Total
            {
                var f1c = planes.Where(p => p.k_incidencia.k_control != null).Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,5,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,5,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>

        <tr>
            <!--        Otros         -->
            <td>@Strings.getMSG("lyPIndex003")</td>
            @foreach (var clas in clasifInc)//Concluidos
            {
                var f1c = p6C.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,6,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,6,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vigentes
            {
                var f1c = p6Vi.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,6,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,6,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vencidos
            {
                var f1c = p6Ve.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,6,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,6,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Total
            {
                var f1c = planes.Where(p => p.k_incidencia.k_objeto != null).Where(p => p.k_incidencia.k_objeto.tipo_objeto == 6).Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,6,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,6,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>

        <tr>
            <!--        SubTotal         -->
            <td>@Strings.getMSG("GraphicsPlanesRemIndex003")</td>
            @foreach (var clas in clasifInc)//Concluidos
            {
                var f1c = pC.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,7,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(1,7,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vigentes
            {
                var f1c = pVig.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,7,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(2,7,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Vencidos
            {
                var f1c = pVen.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,7,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="CL@(clas.id_clasificacion_incidencia) hover" onclick="details(3,7,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
            @foreach (var clas in clasifInc)//Total
            {
                var f1c = planes.Where(p => p.k_incidencia.id_clasificacion_incidencia == clas.id_clasificacion_incidencia).Count();
                <td class="hover" onclick="details(4,7,@clas.id_clasificacion_incidencia);">@f1c</td>
                <td class="hover" onclick="details(4,7,@clas.id_clasificacion_incidencia);">@(string.Format("{0:0.0}", (((double)(f1c * 100)) / ((double)planes.Count))))%    </td>
            }
        </tr>
        <tr>
            <!--        Total         -->
            <td>@Strings.getMSG("GraphicsPlanesRemIndex002")</td>
            <td colspan="@nClasif" class="hover" onclick="detailsTotal(1);">@pC.Count</td>
            <td colspan="@nClasif" class="hover" onclick="detailsTotal(1);">@(string.Format("{0:0.0}", (((double)(pC.Count * 100)) / ((double)planes.Count))))%</td>

            <td colspan="@nClasif" class="hover" onclick="detailsTotal(2);">@pVig.Count</td>
            <td colspan="@nClasif" class="hover" onclick="detailsTotal(2);">@(string.Format("{0:0.0}", (((double)(pVig.Count * 100)) / ((double)planes.Count))))%</td>

            <td colspan="@nClasif" class="hover" onclick="detailsTotal(3);">@pVen.Count</td>
            <td colspan="@nClasif" class="hover" onclick="detailsTotal(3);">@(string.Format("{0:0.0}", (((double)(pVen.Count * 100)) / ((double)planes.Count))))%</td>

            <td colspan="@nClasif" class="hover" onclick="detailsTotal(4);">@planes.Count</td>
            <td colspan="@nClasif" class="hover" onclick="detailsTotal(4);">@(string.Format("{0:0.0}", (((double)(planes.Count * 100)) / ((double)planes.Count))))%</td>
        </tr>

    </table>

</div>




