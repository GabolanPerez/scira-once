@model IEnumerable<SCIRA.Models.k_programa_trabajo>
@using SCIRA.Utilidades
@{
    Layout = "~/Views/Shared/_LayoutReporte.cshtml";
    ViewBag.Title = "Seguimiento de Observaciones";

    List<string> años = ViewBag.años;

    if (años.Count == 0)
    {
        años.Add(DateTime.Now.Year.ToString());
    }

    años = años.OrderBy(a => a).ToList();

    var ultimoAño = años.Last();
}

<script>
    var url = '@Url.Action("IndexTableSeguimientoObservaciones", "Auditoria")';
    function setYear(year) {
        toastr.info("Cargando registros del " + year);
        $(".year").removeClass("btn-default");
        $(".y" + year).addClass("btn-default");

        loadInfo(year);
    }

    $(document).ready(function () {
        loadInfo(@ultimoAño);
    });

    function loadInfo(year) {
        $("#TableContainer").load(url + "/?year=" + year);
    }
</script>


<h2>@Strings.getMSG("AuditoriaIndexSeguimientoObservaciones001")</h2>

<hr />
<div class="row">
    @foreach (var item in años)
    {

        <button class="btn @(item == ultimoAño ? "btn-default":"") my-4 y@(item) year" onclick="setYear(@item)">@item</button>
    }
</div>

<hr />

<div id="TableContainer">
</div>


