<!DOCTYPE html>
@using SCIRA.Utilidades
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - SCIRA</title>

    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/general")
    <script src="~/Scripts/jquery.signalR-2.4.3.min.js"></script>
    <script type="text/javascript" src="~/signalr/hubs"></script>

    <script>
        toastr.options.positionClass = 'toast-bottom-left';
    </script>

</head>
<body>


    @Html.Partial("_Menu")
    <div class="container body-content" id="PrincipalContainer">

        @RenderBody()

        @Html.EJS().ScriptManager()


        <hr />
        @Html.Partial("_Footer")
    </div>
    @RenderSection("scripts", required: false)
    <script type="text/javascript" class="init">
    var table;

    var dataTableOptions = {
        emptyTable: "@Strings.getMSG("LineaNegocioIndex001")",
        info: "@Strings.getMSG("Registros") _START_ @Strings.getMSG("al") _END_ @Strings.getMSG("de") _TOTAL_",
        infoEmpty: "@Strings.getMSG("LineaNegocioIndex002")",
        infoFiltered: "(@Strings.getMSG("PlantallaIndex001")  _MAX_)",
        search: "@Strings.getMSG("Buscar")",
        zeroRecords: "@Strings.getMSG("PlantillaIndex001")",
        paginate: {
            first: "<<",
            next: ">",
            last: ">>",
            previous: "<"
        },
        lengthMenu: "@Strings.getMSG("Mostrar") _MENU_ @Strings.getMSG("Registros")"
    };

    var dataTableAll = "@Strings.getMSG("PlantillaIndex002")";


        $(document).ready(function () {

            $('#results thead th.search').each(function () {
                var title = $(this).text();
                $(this).html(title + '<br><div class="form-group"><div class="col-xs-12"><div class="input-group input-group-sm"><input type="text" class="form-control " placeholder="@Strings.getMSG("Buscar") ' + title + '" /></div></div></div>');
            });


            var paginate = "full_numbers";

            table = $('#results,.results').DataTable({
                responsive: true,
                pagingType: paginate,
                lengthChange: true,
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, dataTableAll]],
                columnDefs: [
                    { orderable: false, targets: -1 }
                ],
                language: dataTableOptions
            });


            table.columns().every(function () {
                var that = this;
                $('input', this.header()).on('keyup change', function () {
                    if (that.search() !== this.value) {
                        that
                            .search(this.value)
                            .draw();
                    }
                });
            });


            //en caso de que exista una segunda tabla
            if ($("#results2").length > 0) {
                loadTable2();
            }



        });

        function loadTable2() {
            $('#results2 thead th.search').each(function () {
                var title = $(this).text();
                $(this).html(title + '<br><div class="form-group"><div class="col-xs-12"><div class="input-group input-group-sm"><input type="text" class="form-control " placeholder="@Strings.getMSG("Buscar") ' + title + '" /></div></div></div>');
            });

            var table2 = $('#results2').DataTable({
                responsive: true,
                pagingType: "full_numbers",
                lengthChange: true,
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "@Strings.getMSG("PlantillaIndex002")"]],
                columnDefs: [
                    { orderable: false, targets: -1 }
                ],
                language: {
                    emptyTable: "@Strings.getMSG("LineaNegocioIndex001")",
                    info: "@Strings.getMSG("Registros") _START_ @Strings.getMSG("al") _END_ @Strings.getMSG("de") _TOTAL_",
                    infoEmpty: "@Strings.getMSG("LineaNegocioIndex002")",
                    infoFiltered: "@Strings.getMSG("PlantallaIndex001") _MAX_)",
                    search: "@Strings.getMSG("Buscar")",
                    zeroRecords: "@Strings.getMSG("PlantillaIndex001")",
                    paginate: {
                        first: "<<",
                        next: ">",
                        last: ">>",
                        previous: "<"
                    },
                    lengthMenu: "@Strings.getMSG("Mostrar") _MENU_ @Strings.getMSG("Registros")"
                }
            });



            table2.columns().every(function () {
                var that = this;
                $('input', this.header()).on('keyup change', function () {
                    if (that.search() !== this.value) {
                        that
                            .search(this.value)
                            .draw();
                    }
                });
            });
        }

    </script>
</body>
</html>
