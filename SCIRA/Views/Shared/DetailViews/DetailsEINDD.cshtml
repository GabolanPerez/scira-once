@model IEnumerable<SCIRA.Models.k_evaluacion_diaria>
@using SCIRA.Utilidades
<script src="~/Scripts/sharedScripts.js"></script>
<script>
    $(document).ready(function () {
        initTables("#menuModal");

        menuModal.setTitle("@Strings.getMSG("EvaluacionIndicadorDiarioIndex006")");

        @if(ViewBag.title != null)
        {
        @:menuModal.setTitle("@ViewBag.title");
        }
    });
</script>

<table class="results table table-bordered table-striped table-hover table-responsive">
    <thead>
        <tr>
            <th class="search">@Strings.getMSG("ControlEdit001")</th>
            <th class="search">@Strings.getMSG("Usuario")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorDiarioIndex005")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorDiarioIndex004")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorCreate007")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorCreate008")</th>
            <th class="search">@Strings.getMSG("RiesgoResidualConfigIndex020")</th>
            <th class="search">@Strings.getMSG("EvaluacionIndicadorEvaluaciones003")</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            var calificacion = SCIRA.Utilidades.Utilidades.EvalNote(item);

            string numerador = "", denominador = "", porcentaje = "", calif = "";

            if (calificacion != 4)
            {
                
                numerador = ((double)item.numerador).ToString();
                denominador = ((double)item.denominador).ToString();

                var medicion = (item.numerador / item.denominador) * 100;
                porcentaje = ((double)medicion).ToString() + "%";
            }
            else
            {
                numerador = denominador = porcentaje = "N/A";
            }

            switch (calificacion)
            {
                case 1:
                    calif = @Strings.getMSG("Bueno");
                    break;
                case 2:
                    calif = @Strings.getMSG("Regular");
                    break;
                case 3:
                    calif = @Strings.getMSG("Malo");
                    break;
                case 4:
                    calif = @Strings.getMSG("No Calificado");
                    break;
            }


            <tr>
                <td>
                    <a href=#null onclick="indicatorDetails(@item.id_indicador_diario);">
                        @item.c_indicador_diario.cl_indicador_diario
                    </a>
                </td>
                <td>@item.c_usuario.nb_usuario</td>
                <td>@item.c_usuario.c_area.nb_area</td>
                <td>@(SCIRA.Utilidades.Utilidades.getRuta(item.c_contenido_grupo))</td>
                <td>@numerador</td>
                <td>@denominador</td>
                <td>@porcentaje</td>
                <td><span class="label bc@(calificacion)">@calif</span></td>
            </tr>
        }
    </tbody>
</table>


<!-- #region Styles -->
<style>
    .bc1 {
        background-color: green;
    }

    .bc2 {
        background-color: goldenrod;
    }

    .bc3 {
        background-color: red;
    }

    .bc4 {
        background-color: dodgerblue;
    }

    .label {
        font-size: 1em;
    }
</style>
<!-- #endregion -->

<!-- #region Scripts -->
<script>

    @if(ViewBag.type == 1)
    {
    @:function indicatorDetails(id) {
    @:  var data = {
    @:      id_ind: id,
    @:      id_content: @ViewBag.id_content
    @:  };
    @:  menuModal.bodyLoad('@Url.Action("IndicatorDetails","GraphicsIndicadorDiario")',null,data);
    @:}
    }

    @if(ViewBag.type == 2)
    {
    @:function indicatorDetails(id) {
    @:  var data = {
    @:      id_ind: id,
    @:      fe_eval: '@ViewBag.fe_eval',
    @:      tipo: @ViewBag.tipo
    @:  };
    @:  menuModal.bodyLoad('@Url.Action("IndicatorDetails2","GraphicsIndicadorDiario")',null,data);
    @:}
    }
    @if(ViewBag.type == 3)
    {
    @:function indicatorDetails(id) {
    @:  var data = {
    @:      id_ind: id
    @:  };
    @:  menuModal.bodyLoad('@Url.Action("IndicatorDetails","EvaluacionIndicadorDiario")',null,data);
    @:}
    }

</script>
<!-- #endregion -->