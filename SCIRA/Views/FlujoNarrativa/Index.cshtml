@model IEnumerable<SCIRA.Models.c_sub_proceso>
@using SCIRA.Utilidades
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
}

<link href="~/Content/font-awesome.min.css" rel="stylesheet" />

<h2>@Strings.getMSG("Menu078")</h2>

<table id="results" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th class="search">@Strings.getMSG("Entidad")</th>
            <th class="search">@Strings.getMSG("Responsable")</th>
            <th class="search">@Strings.getMSG("MP")</th>
            <th class="search">@Strings.getMSG("Responsable")</th>
            <th class="search">@Strings.getMSG("P")</th>
            <th class="search">@Strings.getMSG("Responsable")</th>
            <th class="search">@Strings.getMSG("SP")</th>
            <th class="search">@Strings.getMSG("Responsable")</th>
            <th width="75">@Strings.getMSG("RiesgoCreate080")</th>
            <th width="75">@Strings.getMSG("RiesgoCreate081")</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            var pr = item.c_proceso;
            var mp = pr.c_macro_proceso;
            var en = mp.c_entidad;
        <tr>
            <td>
                @(en.cl_entidad + " - " + en.nb_entidad)
            </td>
            <td>
                @(en.c_usuario.nb_usuario)
            </td>
            <td>
                @(mp.cl_macro_proceso + " - " + mp.nb_macro_proceso)
            </td>
            <td>
                @(mp.c_usuario.nb_usuario)
            </td>
            <td>
                @(pr.cl_proceso + " - " + pr.nb_proceso)
            </td>
            <td>
                @(pr.c_usuario.nb_usuario)
            </td>
            <td>
                @(item.cl_sub_proceso + " - " + item.nb_sub_proceso)
            </td>
            <td>
                @(item.c_usuario.nb_usuario)
            </td>
            <td>
                <a href="@Url.Action("Flujo", new { id = item.id_sub_proceso })">
                    <i class="fa fa-file-text-o fa-lg" title="@Strings.getMSG("lyPIndex027")"></i>
                </a>
                @if (item.nb_archivo_flujo != "" && item.nb_archivo_flujo != null)
                {
                    <span>|</span>
                    <a href="@Url.Action("DescargaFlujo", new { id = item.id_sub_proceso })">
                        <i class="fa fa-download fa-lg" title="@Strings.getMSG("FlujoNarrativaNarrativa002")"></i>
                    </a>
                    <span>|</span>
                    <a href="@Url.Action("EliminarFlujo", new { id = item.id_sub_proceso })">
                        <i class="fa fa-trash fa-lg" title="@Strings.getMSG("FlujoNarrativaNarrativa003")"></i>
                    </a>
                }
            </td>
            <td>
                <a href="@Url.Action("Narrativa", new { id = item.id_sub_proceso })">
                    <i class="fa fa-file-text-o fa-lg" title="@Strings.getMSG("lyPIndex027")"></i>
                </a>
                @if (item.nb_archivo_manual != "" && item.nb_archivo_manual != null)
                {
                    <span>|</span>
                    <a href="@Url.Action("DescargaNarrativa", new { id = item.id_sub_proceso })">
                        <i class="fa fa-download fa-lg" title="@Strings.getMSG("FlujoNarrativaNarrativa002")"></i>
                    </a>
                    <span>|</span>
                    <a href="@Url.Action("EliminarNarrativa", new { id = item.id_sub_proceso })">
                        <i class="fa fa-trash fa-lg" title="@Strings.getMSG("FlujoNarrativaNarrativa003")"></i>
                    </a>
                }
            </td>
        </tr>
        }
    </tbody>
</table>
